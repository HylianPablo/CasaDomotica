/**
 * Contenido en el paquete que agrupa las vistas y controladores y la maquina
 * de estados de la casa domótica
 * de la casa domótica.
 * Se importa el modelo para guardar los estados y establecerlos inicialmente.
 * Se importa la clase Color con el fin de utilizarla para establecer el color
 * de la temperatura.
 */
package domotic_house_view;
import domotic_house_model.CasaDomotica;
import java.awt.Color;
/**
 * Vista del termostato de la sala domótica.
 * Práctica de Interacción Persona-Computadora.
 * Universidad de Valladolid.
 * @author Angel Moreno Calvo
 * @author Pablo Martinez Lopez
 */
public class HeatingView extends javax.swing.JFrame {
    CasaDomotica model;
    HeatingController controlador;
    
    
    /**
     * Constructor de la vista del termostato.
     * inicialmente la temperatura estara a 20 grados.
     * Se necesita el modelo para poder guardar los estados.
     * @param m modelo utilizado en la implementación.
     */
    public HeatingView(CasaDomotica m) {
        model = m;
        controlador=new HeatingController(this,m);
        initComponents();
        temperature_text.setText(Integer.toString(model.getHeating()));
        Heating_slider.setValue(model.getHeating());
        temperature_text.setForeground(Color.GREEN);
        exit_heating.setIcon(new javax.swing.ImageIcon(getClass().getResource("/domotic_house_view/images/back.png")));
        Leaf_icon.setIcon(new javax.swing.ImageIcon(getClass().getResource("/domotic_house_view/images/leaf.png")));
        Cold_icon.setIcon(new javax.swing.ImageIcon(getClass().getResource("/domotic_house_view/images/snow.png")));
        Heat_icon.setIcon(new javax.swing.ImageIcon(getClass().getResource("/domotic_house_view/images/sun1.png")));
        actInt(model.getHeating());
    }
    
    
    /**
     * Realiza los cambios continuos asignados al texto referentes al color.
     * 
     * Por ejemplo si el slider baja de 20 pasara a un color azul.
     * @param n valor de la temperatura.
     */
    public void actInt(int n){
        if(n==20){
            Leaf_icon.setVisible(true);
        }else{
            Leaf_icon.setVisible(false);
        }
        temperature_text.setText(Integer.toString(n)+"º C");
        if(n>=10 && n<15){
            temperature_text.setForeground(Color.BLUE);
        }else if(n>=15 && n<=19){
            temperature_text.setForeground(Color.CYAN);
        }else if(n==20){
            temperature_text.setForeground(Color.GREEN);
        }
        else if(n>=21 && n<25){
            temperature_text.setForeground(Color.ORANGE);
        }else{
            temperature_text.setForeground(Color.RED);
        }
        
        
    }
    
    /**
     * Devuelve el valor del slider
     * @return Entero entre 10 y 30 incluidos
     */
    public int getIntensity(){
        return Heating_slider.getValue();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        temperature_text = new javax.swing.JLabel();
        Heating_slider = new javax.swing.JSlider();
        exit_heating = new javax.swing.JButton();
        jLabel1 = new javax.swing.JLabel();
        Cold_icon = new javax.swing.JLabel();
        Heat_icon = new javax.swing.JLabel();
        Leaf_icon = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("HEATING SYSTEM");
        setPreferredSize(new java.awt.Dimension(1024, 569));
        setResizable(false);
        setSize(new java.awt.Dimension(1000, 500));

        temperature_text.setFont(new java.awt.Font("Lucida Grande", 0, 92)); // NOI18N
        temperature_text.setText("20º C");

        Heating_slider.setMajorTickSpacing(1);
        Heating_slider.setMaximum(30);
        Heating_slider.setMinimum(10);
        Heating_slider.setPaintTicks(true);
        Heating_slider.setValue(20);
        Heating_slider.addChangeListener(new javax.swing.event.ChangeListener() {
            public void stateChanged(javax.swing.event.ChangeEvent evt) {
                Heating_sliderStateChanged(evt);
            }
        });

        exit_heating.setBackground(new java.awt.Color(255, 102, 102));
        exit_heating.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                exit_heatingActionPerformed(evt);
            }
        });

        jLabel1.setFont(new java.awt.Font("Dialog", 1, 48)); // NOI18N
        jLabel1.setText("HEATING");

        Cold_icon.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                .addContainerGap(285, Short.MAX_VALUE)
                .addComponent(Cold_icon, javax.swing.GroupLayout.PREFERRED_SIZE, 106, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.CENTER)
                    .addComponent(exit_heating, javax.swing.GroupLayout.PREFERRED_SIZE, 157, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(Heating_slider, javax.swing.GroupLayout.PREFERRED_SIZE, 587, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                        .addComponent(jLabel1)
                        .addGap(201, 201, 201))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                        .addComponent(temperature_text, javax.swing.GroupLayout.PREFERRED_SIZE, 267, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(184, 184, 184))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                        .addComponent(Leaf_icon, javax.swing.GroupLayout.PREFERRED_SIZE, 105, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(223, 223, 223)))
                .addComponent(Heat_icon, javax.swing.GroupLayout.PREFERRED_SIZE, 88, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(132, 132, 132))
        );

        jPanel1Layout.linkSize(javax.swing.SwingConstants.HORIZONTAL, new java.awt.Component[] {Cold_icon, Heat_icon});

        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 94, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(81, 81, 81)
                .addComponent(temperature_text, javax.swing.GroupLayout.PREFERRED_SIZE, 82, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(36, 36, 36)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(Leaf_icon, javax.swing.GroupLayout.DEFAULT_SIZE, 94, Short.MAX_VALUE)
                        .addGap(18, 18, 18)
                        .addComponent(Heating_slider, javax.swing.GroupLayout.PREFERRED_SIZE, 59, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(Heat_icon, javax.swing.GroupLayout.PREFERRED_SIZE, 80, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(Cold_icon, javax.swing.GroupLayout.PREFERRED_SIZE, 51, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addComponent(exit_heating, javax.swing.GroupLayout.PREFERRED_SIZE, 69, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(104, 104, 104))
        );

        jPanel1Layout.linkSize(javax.swing.SwingConstants.VERTICAL, new java.awt.Component[] {Cold_icon, Heat_icon});

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void Heating_sliderStateChanged(javax.swing.event.ChangeEvent evt) {//GEN-FIRST:event_Heating_sliderStateChanged
    //TODO esto hay que terminarlo    
    controlador.slider();
    }//GEN-LAST:event_Heating_sliderStateChanged

    private void exit_heatingActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_exit_heatingActionPerformed
        controlador.back_to_login();
    }//GEN-LAST:event_exit_heatingActionPerformed

   

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel Cold_icon;
    private javax.swing.JLabel Heat_icon;
    private javax.swing.JSlider Heating_slider;
    private javax.swing.JLabel Leaf_icon;
    private javax.swing.JButton exit_heating;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JLabel temperature_text;
    // End of variables declaration//GEN-END:variables
}
